# Pikabot
Pikabot - это телеграм-бот для получения необходимых пользователю постов с сайта Pikabu.ru.  
Пользователь, попадая в бота, выбирает категорию постов: "Горячие" посты (с наибольшим рейтингом), либо "Свежие посты", написанные только что. Далее пользователю дана возможность выбрать тег поста (некое условное обозначение темы поста), либо не выбирать, а посмотреть все. Затем он может отфильтровать посты по разным критериям:
1. По дате (сначала новые)
2. По рейтингу (сначала самые рейтинговые)
3. По просмотрам (топ просмотров)
4. По комментариям (сначала топ комментариев)
5. Не фильтровать

Также пользователь может выбрать количество постов к выдаче: от 1 до 30 постов. И вернуться в начало при необходимости.

Попробовать: https://t.me/bot_pikabot  

Проект запущен на heroku, используется база данных MongoDB.

## Сборка репозитория и локальный запуск
Выполните в консоли:
```
git clone https://github.com/rockbottommmm/parcing_project.git
pip install -r requirments.txt
```
 
### Настройка
Создайте файл settings.py и добавьте туда следующие настройки:
```
API_KEY = "Апи ключ, который вы получили у BotFather"
MyClient = "Ссылка на кластер, который вы получили при создании базы на MongoDB Atlas
```
### Наполнение базы данных
Из корня проекта запустите парсер:
```
main_parcing.py
```
Выберите в соответствующем разделе количество страниц для парсинга.
Дождитесь, пока база заполнится необходимыми данными.

Чтобы запустить обновление базы данных, запустите скрипт:
```
check_updates.py
```
Он проверит базу и дополнит, если появились обновления.
Чтобы запустить автоматическое обновление базы данных локально, раскомментируйте нижние строчки, 
а также закомментируйте условие выше:
```
#if __name__ == "__main""
```

### Запуск
Чтобы запустить бота, выполните в консоли:
```
python bot.py
```